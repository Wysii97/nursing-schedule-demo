# 排班與預假功能增強導覽

本文件說明「排班工作台」與「預假申請」的最新功能增強，旨在簡化管理流程並提升資訊透明度。

## 1. 排班工作台 (Workbench)
### 1.1 動態與視覺化排班
工作台現在直接讀取系統設定的班別，並提供更豐富的視覺提示。
*   **預假狀態**：待審核的預假以 **黃色背景** 與 **?** 標示；已核准的為 **綠色字體**。
*   **右鍵選單**：動態列出所有可用班別，不再僅限於 D/E/N。
*   **假勤明細增強**：管理員點擊人員姓名查看假勤紀錄時，現在會顯示**詳細事由**（例如：包含「借休 4 小時」的具體時數），方便精確掌握工時狀況。

![排班工作台-待審核預假](/Users/nashhuang/.gemini/antigravity/brain/c4d560f2-c31c-4f03-81a5-4f0595824407/.system_generated/click_feedback/click_feedback_1766843284512.png)

### 1.2 智慧排班防呆機制
*   **阻擋排班**：若當月尚有「待審核 (Pending)」的預假，系統將禁止執行「一鍵智慧排班」。
*   **警示訊息**：點擊排班時會彈出提示，要求先完成審核。

## 2. 員工預假申請 (Pre-leave)
### 2.1 全員預假行事曆
預假申請畫面新增了「全員檢視」功能。
*   **檢視他人**：行事曆上以灰色圓點標示當日已有多少人預假。
*   **資訊透明**：滑鼠停留在灰色圓點上時，顯示該同事的姓名與假別。
*   **手機版優化**：在手機上，點擊日期後，假別填寫表單會直接顯示在行事曆下方，提供流暢的預假體驗。

![預假行事曆-全員檢視](/Users/nashhuang/.gemini/antigravity/brain/c4d560f2-c31c-4f03-81a5-4f0595824407/calendar_feb_2025_1766844856389.png)

### 2.2 每月變動額度設定 (NEW)
系統現在支援針對不同月份設定不同的「每人申請上限」，以因應特殊月份（如春節）的人力需求。
*   **設定方式**：在「單位規則設定」中，新增特定月份及其額度上限（如 2025-02 上限 2 天）。

### 2.3 修改申請功能
員工可以在截止日前，直接修改已送出的預假申請。

## 3. 手機版體驗優化 (Mobile Experience) ✅
針對護理人員常用的手機情境，我們進行了全面的介面優化：

### 3.1 響應式佈局 (Responsive Layout)
*   **我的班表**：在手機上呈現 **單欄式設計**，優先顯示「今日狀態」與「日曆」，次要資訊（如餘額、通知）自動排至下方。
*   **換班申請 (Shift Swap)**：原本寬寬的表格在手機上會自動轉換為 **卡片式列表 (Card View)**，清楚呈現每一筆換班申請的狀態與操作按鈕，不再需要左右滑動。
*   **班表詳情 (Detail Panel)**：點擊日期時，詳情面板會以 **全螢幕覆蓋 (Overlay)** 方式彈出，避免與日曆擠壓，並可一鍵關閉。

### 3.2 觸控友善 (Touch Friendly)
*   **日曆格**：手機版自動縮小格子高度並優化點擊熱區，解決誤觸問題。
*   **預假流程**：調整了預假頁面的區塊順序 (日曆 -> 表單 -> 歷史紀錄)，讓填寫流程更符合直覺。

---
**總結**：我們已完成全系統的手機版優化，包含「我的班表」、「預假申請」與「換班管理」，確保一般使用者在移動裝置上能順暢操作。同時，管理員端也增強了資訊的完整性，讓借還休的時數紀錄一目了然。
